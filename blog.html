<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>TRAVELER - Free Travel Website Template</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="Free HTML Templates" name="keywords">
    <meta content="Free HTML Templates" name="description">

    <!-- Favicon -->
    <link href="img/favicon.ico" rel="icon">

    <!-- Google Web Fonts -->
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">

    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css" rel="stylesheet">

    <!-- Libraries Stylesheet -->
    <link href="lib/owlcarousel/assets/owl.carousel.min.css" rel="stylesheet">
    <link href="lib/tempusdominus/css/tempusdominus-bootstrap-4.min.css" rel="stylesheet" />

    <!-- Map -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.8.0/dist/leaflet.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.css" />
    <script src="https://unpkg.com/leaflet@1.8.0/dist/leaflet.js"></script>
    <script src="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.js"></script>

    <!-- Customized Bootstrap Stylesheet -->
    <link href="css/style.css" rel="stylesheet">
</head>
<style>
    .tag-buttons {
        display: inline-flex;
        gap: 10px;
        padding: 0 20px;
        align-items: center;
        white-space: nowrap;
    }

    .tag-button {
        padding: 5px 15px;
        border-radius: 20px;
        background-color: rgb(218, 218, 218);
        border: none;
        cursor: pointer;
    }

    .tag-button:hover {
        background-color: rgb(196, 196, 196);
    }

    .tag-button.active {
        background-color: #555;
        color: white;
    }

    span#price-detail {
        position: absolute;
        top: 25px;
        right: 25px;
        padding: 15px;
        background: var(--light);
        border-radius: 10px;
        font-weight: 1000;
        color: black;
        box-shadow: 10px 15px 15px #00000085;
    }

    #map {
        height: 50dvh;
    }
</style>

<body>
    <div id="header-container"></div>
    <!-- Navbar End -->


    <!-- Header Start -->
    <div class="container-fluid page-header">
        <div class="container">
            <div class="d-flex flex-column align-items-center justify-content-center" style="min-height: 400px">
                <h3 class="display-4 text-white text-uppercase">Blog</h3>
                <div class="d-inline-flex text-white">
                    <p class="m-0 text-uppercase"><a class="text-white" href="/index.html">Home</a></p>
                    <i class="fa fa-angle-double-right pt-1 px-3"></i>
                    <p class="m-0 text-uppercase">Blog</p>
                </div>
            </div>
        </div>
    </div>
    <!-- Header End -->


    <!-- Booking Start -->
    <div id="bookform-container"></div>
    <!-- Booking End -->


    <!-- Blog Start -->
    <div class="container-fluid ">
        <div class="container ">

            <div class="col-md-6">
                <div class="row align-items-center" style="min-height: 60px;">
                </div>
            </div>

            <div class="row">
                <div class="col-lg-8">
                    <div class="row pb-3 " id="blog_result">
                        <!-- Blog Start -->
                        <div class="container-fluid py-5">
                            <div class="row">
                                <!-- Blog Detail Start -->
                                <div class="pb-3">
                                    <div class="blog-item">
                                        <div class="position-relative d-flex justify-content-center align-items-center">
                                            <img class="img-fluid" id="blog-img" src="" alt="" style="max-height:500px">
                                            <div class="blog-price">
                                                <a href=""><span id="price-detail">HK$ <br>Buy Now</span></a>
                                            </div>
                                            <div class="blog-date">
                                                <h6 class="font-weight-bold mb-n1">01</h6>
                                                <small class="text-white text-uppercase">Jan</small>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="bg-white mb-3" style="padding: 30px;">
                                        <div class="d-flex mb-3">
                                            <a class="text-primary text-uppercase text-decoration-none">Package</a>
                                            <span class="text-primary px-2">|</span>
                                            <a class="text-primary text-uppercase text-decoration-none">Tours &
                                                Travel</a>
                                        </div>
                                        <h2 class="mb-3" id="blog-title"></h2>
                                        <p id="blog-description"></p>
                                        <!-- Blog Detail End -->
                                        <h2>Map Marker</h2>
                                        <div id="map"></div>
                                    </div>

                                </div>
                            </div>
                        </div>
                        <!-- Blog End -->

                    </div>
                </div>

                <div class="col-lg-4 mt-5 mt-lg-0">

                    <!-- Category List -->
                    <div class="mb-5">
                        <h4 class="text-uppercase mb-4" style="letter-spacing: 5px;">Categories</h4>
                        <div class="bg-white" style="padding: 30px;">
                            <ul class="list-inline m-0">
                                <li class="mb-3 d-flex justify-content-between align-items-center">
                                    <a class="text-dark" href="#"><i class="fa fa-angle-right text-primary mr-2"></i>Web
                                        Design</a>
                                    <span class="badge badge-primary badge-pill">150</span>
                                </li>
                                <li class="mb-3 d-flex justify-content-between align-items-center">
                                    <a class="text-dark" href="#"><i class="fa fa-angle-right text-primary mr-2"></i>Web
                                        Development</a>
                                    <span class="badge badge-primary badge-pill">131</span>
                                </li>
                                <li class="mb-3 d-flex justify-content-between align-items-center">
                                    <a class="text-dark" href="#"><i
                                            class="fa fa-angle-right text-primary mr-2"></i>Online Marketing</a>
                                    <span class="badge badge-primary badge-pill">78</span>
                                </li>
                                <li class="mb-3 d-flex justify-content-between align-items-center">
                                    <a class="text-dark" href="#"><i
                                            class="fa fa-angle-right text-primary mr-2"></i>Keyword Research</a>
                                    <span class="badge badge-primary badge-pill">56</span>
                                </li>
                                <li class="d-flex justify-content-between align-items-center">
                                    <a class="text-dark" href="#"><i
                                            class="fa fa-angle-right text-primary mr-2"></i>Email Marketing</a>
                                    <span class="badge badge-primary badge-pill">98</span>
                                </li>
                            </ul>
                        </div>
                    </div>

                    <!-- Recent Post -->
                    <div class="mb-5">
                        <h4 class="text-uppercase mb-4" style="letter-spacing: 5px;">Recent Post</h4>
                        <a class="d-flex align-items-center text-decoration-none bg-white mb-3" href="">
                            <img class="img-fluid" src="img/blog-100x100.jpg" alt="">
                            <div class="pl-3">
                                <h6 class="m-1">Diam lorem dolore justo eirmod lorem dolore</h6>
                                <small>Jan 01, 2050</small>
                            </div>
                        </a>
                        <a class="d-flex align-items-center text-decoration-none bg-white mb-3" href="">
                            <img class="img-fluid" src="img/blog-100x100.jpg" alt="">
                            <div class="pl-3">
                                <h6 class="m-1">Diam lorem dolore justo eirmod lorem dolore</h6>
                                <small>Jan 01, 2050</small>
                            </div>
                        </a>
                        <a class="d-flex align-items-center text-decoration-none bg-white mb-3" href="">
                            <img class="img-fluid" src="img/blog-100x100.jpg" alt="">
                            <div class="pl-3">
                                <h6 class="m-1">Diam lorem dolore justo eirmod lorem dolore</h6>
                                <small>Jan 01, 2050</small>
                            </div>
                        </a>
                    </div>

                    <!-- Tag Cloud -->
                    <div class="mb-5">
                        <h4 class="text-uppercase mb-4" style="letter-spacing: 5px;">Tag Cloud</h4>
                        <div class="d-flex flex-wrap m-n1">
                            <a href="" class="btn btn-light m-1">Design</a>
                            <a href="" class="btn btn-light m-1">Development</a>
                            <a href="" class="btn btn-light m-1">Marketing</a>
                            <a href="" class="btn btn-light m-1">SEO</a>
                            <a href="" class="btn btn-light m-1">Writing</a>
                            <a href="" class="btn btn-light m-1">Consulting</a>
                        </div>
                    </div>
                </div>

                <!-- Comment Section Start 20240309-->
                <div class="col-md-8">
                    <div class="flex-container">
                        <div class="comments-container" style="padding: 30px;display: none;">
                            <h4 class="text-uppercase mb-4" style="letter-spacing: 5px;">Comments</h4>
                        </div>
                        <div class="bg-white mb-3" style="padding: 30px;">
                            <h4 class="text-uppercase mb-4" style="letter-spacing: 5px;">Leave a comment</h4>
                            <form id="commentForm">
                                <div class="form-group">
                                    <label for="name">Name</label>
                                    <input type="text" class="form-control" id="name">
                                </div>
                                <div class="form-group">
                                    <label for="email">Email</label>
                                    <input type="email" class="form-control" id="email">
                                </div>

                                <div class="form-group">
                                    <label for="message">Message</label>
                                    <textarea id="message" cols="30" rows="5" class="form-control"></textarea>
                                </div>
                                <div class="form-group mb-0">
                                    <input type="submit" value="Leave a comment"
                                        class="btn btn-primary font-weight-semi-bold py-2 px-3">
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
                <!-- Comment Section End 20240309-->
            </div>
        </div>
    </div>
    <!-- Blog End -->
    <script>
        //Comment 
        var userAvatar = "img/testimonial-2.jpg";
        var replyAvatar = "img/user.jpg";

        document.getElementById('commentForm').addEventListener('submit', function (event) {
            event.preventDefault();
            var commentsContainer = document.querySelector('.comments-container');
            commentsContainer.style.display = 'block';

            const name = document.getElementById('name').value.trim();
            const message = document.getElementById('message').value.trim();

            if (!name || !message) {
                toastbar('Please fill in all fields.', 'red');
                return;
            }

            addComment(name, message, null, userAvatar);

            document.getElementById('name').value = '';
            document.getElementById('message').value = '';
        });

        function addComment(name, message, parentId = null, avatar = userAvatar, date = " 03 March 2024") {
            const commentsContainer = document.querySelector('.comments-container');

            const commentDiv = document.createElement('div');
            commentDiv.classList.add('media');

            const img = document.createElement('img');
            img.src = avatar;
            img.alt = "Image";
            img.classList.add('img-fluid', 'mr-3', 'mt-1');
            img.style.width = '45px';
            commentDiv.appendChild(img);

            const mediaBodyDiv = document.createElement('div');
            mediaBodyDiv.classList.add('media-body');

            const h6 = document.createElement('h6');
            const userLink = document.createElement('a');
            userLink.href = "#";
            userLink.textContent = name;
            h6.appendChild(userLink);

            const small = document.createElement('small');
            const i = document.createElement('i');
            i.textContent = date;
            small.appendChild(i);
            h6.appendChild(small);

            mediaBodyDiv.appendChild(h6);

            const p = document.createElement('p');
            p.textContent = message;
            mediaBodyDiv.appendChild(p);

            const replyButton = document.createElement('button');
            replyButton.classList.add('btn', 'btn-sm', 'btn-outline-primary');
            replyButton.textContent = 'Reply';
            replyButton.onclick = function () {
                prepareReply(this, avatar);
            };
            mediaBodyDiv.appendChild(replyButton);

            commentDiv.appendChild(mediaBodyDiv);

            if (parentId) {
                const parentElement = document.getElementById(parentId).querySelector('.media-body');
                const newMediaDiv = document.createElement('div');
                newMediaDiv.classList.add('media', 'mt-4');
                newMediaDiv.appendChild(commentDiv);
                parentElement.appendChild(newMediaDiv);
            } else {
                commentsContainer.appendChild(commentDiv);
            }
        }

        function prepareReply(button, avatar) {
            const parentComment = button.parentNode.parentNode;
            const replyForm = document.createElement('form');
            replyForm.classList.add('reply-form');

            const textarea = document.createElement('textarea');
            textarea.classList.add('form-control');
            replyForm.appendChild(textarea);

            const postReplyButton = document.createElement('button');
            postReplyButton.type = 'button';
            postReplyButton.classList.add('btn', 'btn-primary', 'btn-sm');
            postReplyButton.textContent = 'Post';
            postReplyButton.onclick = function () {
                const message = textarea.value.trim();
                if (message) {
                    addComment('Tour guide', message, parentComment.id, replyAvatar);
                    textarea.value = '';
                    replyForm.remove();
                }
            };
            replyForm.appendChild(postReplyButton);

            parentComment.appendChild(replyForm);
            button.remove();
        }

        //End comment
        var queryString = window.location.href.split('?')[1];
        var title = queryString ? queryString.replace(/%20/g, ' ') : '';

        const packageData = JSON.parse(localStorage.getItem('package'));
        const matchedPackageData = [];

        packageData.forEach(package => {
            const packageTitle = package['package-title'].toLowerCase().replace(/-/g, ' ');
            const formattedTitle = title.toLowerCase().replace(/-/g, ' ');

            if (packageTitle === formattedTitle) {
                matchedPackageData.push(package);
            }
        });
        if (title) {
            // Map
            const locationName = matchedPackageData[0].location;

            // Create a map centered at a specific location
            const map = L.map('map').setView([35.6895, 139.6917], 6);

            // Add a tile layer
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors',
                maxZoom: 18,
            }).addTo(map);

            // Create a geocoder control with Nominatim provider
            const geocoder = L.Control.Geocoder.nominatim();

            // Convert the location name to coordinates
            geocoder.geocode(locationName, function (results) {
                if (results.length > 0) {
                    const { lat, lng } = results[0].center;

                    // Set the map center to the location coordinates
                    map.setView([lat, lng], 6);

                    // Add a marker to the location
                    L.marker([lat, lng]).addTo(map)
                        .bindPopup(locationName)
                        .openPopup();
                } else {
                    console.error('Location not found.');
                }
            });
            //End  Map

            // Set the blog title
            document.getElementById('blog-title').textContent = title.replace(/-/g, ' ').replace(/\b\w/g, c => c.toUpperCase());

            // Randomly choose an image
            const randomImage = Math.floor(Math.random() * 3) + 1;
            document.getElementById('blog-img').src = `https://source.unsplash.com/random?${title.replace(/-/g, ' ').replace(/\b\w/g, c => c.toUpperCase())}/760x500`;

            function generateLoremParagraph(wordCount) {
                const words = [
                    'Lorem', 'ipsum', 'dolor', 'sit', 'amet', 'consectetur', 'adipiscing', 'elit',
                    'sed', 'do', 'eiusmod', 'tempor', 'incididunt', 'ut', 'labore', 'et', 'dolore', 'magna', 'aliqua',
                    'Ut', 'enim', 'ad', 'minim', 'veniam', 'quis', 'nostrud', 'exercitation', 'ullamco', 'laboris', 'nisi',
                    'ut', 'aliquip', 'ex', 'ea', 'commodo', 'consequat', 'Duis', 'aute', 'irure', 'dolor', 'in', 'reprehenderit',
                    'in', 'voluptate', 'velit', 'esse', 'cillum', 'dolore', 'eu', 'fugiat', 'nulla', 'pariatur', 'Excepteur',
                    'sint', 'occaecat', 'cupidatat', 'non', 'proident', 'sunt', 'in', 'culpa', 'qui', 'officia', 'deserunt',
                    'mollit', 'anim', 'id', 'est', 'laborum'
                ];

                let paragraph = '';
                for (let i = 0; i < wordCount; i++) {
                    const randomIndex = Math.floor(Math.random() * words.length);
                    paragraph += words[randomIndex] + ' ';
                }

                return paragraph.trim();
            }

            // Generate a Lorem Ipsum-like paragraph with 50 words
            const loremParagraph = generateLoremParagraph(50);
            document.getElementById('blog-description').innerText = loremParagraph;

            const packageData = JSON.parse(localStorage.getItem('package'));
            if (packageData) {
                // Loop through each package
                packageData.forEach((package) => {
                    var storage_title = package['package-title'].toLowerCase().replace(/\s/g, '')
                    var blog_title = document.getElementById('blog-title').textContent.toLowerCase().replace(/\s/g, '')
                    if (storage_title === blog_title) {
                        document.getElementById('price-detail').innerHTML = 'HK' + package['package-price'] + '/Person<br>Buy Now';
                    }
                })
            }else{
                console.error("No data found in local storage")
            }
                } else {
                    window.location.href = `package.html`;
                }

        document.getElementById('price-detail').addEventListener('click', function (e) {
                    e.preventDefault();
                    window.location.href = `package.html?buy=${title}`;
                });
    </script>

    <!-- Footer Start -->
    <div id="footer-container"></div>
    <!-- Footer End -->



    <!-- Back to Top -->
    <a href="#" class="btn btn-lg btn-primary btn-lg-square back-to-top"><i class="fa fa-angle-double-up"></i></a>
    <!-- Google Map -->

    <!-- JavaScript Libraries -->
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.bundle.min.js"></script>
    <script src="lib/easing/easing.min.js"></script>
    <script src="lib/owlcarousel/owl.carousel.min.js"></script>
    <script src="lib/tempusdominus/js/moment.min.js"></script>
    <script src="lib/tempusdominus/js/moment-timezone.min.js"></script>
    <script src="lib/tempusdominus/js/tempusdominus-bootstrap-4.min.js"></script>

    <!-- Contact Javascript File -->
    <script src="mail/jqBootstrapValidation.min.js"></script>
    <script src="mail/contact.js"></script>

    <!-- Template Javascript -->
    <script src="js/main.js"></script>
</body>

</html>